import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";

export default function ScoobyMembers() {
  const [name, setName] = useState("");
  const [submitted, setSubmitted] = useState(false);
  const [step, setStep] = useState(1);
  const [members, setMembers] = useState([]);

  const handleNext = () => setStep(2);

  const sendToWebhook = (name) => {
    const webhookUrl = "https://discord.com/api/webhooks/1345468587904729109/rdVFb9x9OtHQWuavN7nf5NVapnxCuc8NTVs-KwERl92n55YHHUZmKOdF_JPL6WWbZC1o";
    fetch(webhookUrl, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content: `New Scooby Member: ${name}` }),
    });
  };

  const handleJoin = () => {
    const trimmedName = name.trim();
    if (trimmedName !== "" && !members.includes(trimmedName)) {
      setMembers([...members, trimmedName]);
      setSubmitted(true);
      sendToWebhook(trimmedName);
    }
  };

  return (
    <div className="flex flex-col items-center gap-8 p-6 min-h-screen bg-gradient-to-br from-[#1E90FF] to-[#32CD32] text-[#FFD700] font-scooby animate-fadeIn sparkle">
      {step === 1 ? (
        <Card className="w-full max-w-lg bg-[#FF4500] text-white p-8 shadow-2xl text-center rounded-3xl border-4 border-[#FFD700] transform hover:scale-105 transition-all duration-300 animate-glow">
          <CardContent>
            <h2 className="text-6xl font-extrabold text-[#FFD700] drop-shadow-md animate-pulse">Are You a Real Scooby Voter?</h2>
            <p className="mt-4 text-xl leading-relaxed italic">Only true Scooby voters can join our exclusive club! If youâ€™re still unsure, better think twice!</p>
            <p className="mt-2 text-lg font-semibold">No vote? No Scooby membership!</p>
            <Button className="mt-6 w-full bg-[#FFD700] text-[#FF4500] hover:bg-[#FFC300] p-3 text-2xl font-bold rounded-lg shadow-lg hover:shadow-2xl transition-transform transform hover:scale-110" onClick={handleNext}>
              I Pledge My Vote!
            </Button>
          </CardContent>
        </Card>
      ) : (
        <Card className="w-full max-w-lg bg-[#FF4500] text-white p-8 shadow-2xl text-center rounded-3xl border-4 border-[#FFD700] transform hover:scale-105 transition-all duration-300 animate-glow">
          <CardContent>
            {!submitted ? (
              <>
                <h2 className="text-6xl font-extrabold text-[#FFD700] drop-shadow-md animate-pulse">Join the Scooby Gang!</h2>
                <p className="mt-4 text-xl leading-relaxed italic">By joining, you pledge to have fun, solve mysteries, and... VOTE FOR US!</p>
                <p className="mt-2 text-lg font-semibold">No vote? No Scooby snacks!</p>
                <p className="mt-6 text-2xl font-bold text-[#FFD700] underline">Enter your name to join:</p>
                <Input
                  className="mt-4 text-black text-center p-3 rounded-lg shadow-lg text-lg border-2 border-[#FFD700] focus:ring-4 focus:ring-yellow-400 animate-bounce"
                  value={name}
                  onChange={(e) => setName(e.target.value)}
                  placeholder="Your name..."
                />
                {members.includes(name.trim()) && name.trim() !== "" && (
                  <p className="text-red-500 mt-3 font-bold animate-bounce">Zoinks! This name is already on the list!</p>
                )}
                <Button className="mt-6 w-full bg-[#FFD700] text-[#FF4500] hover:bg-[#FFC300] p-3 text-2xl font-bold rounded-lg shadow-lg hover:shadow-2xl transition-transform transform hover:scale-110" onClick={handleJoin}>
                  Join the Gang!
                </Button>
              </>
            ) : (
              <h2 className="text-5xl font-extrabold text-[#FFD700] drop-shadow-lg animate-jumpIn">Welcome, {name}! You're officially a Scooby Member!</h2>
            )}
          </CardContent>
        </Card>
      )}
      <a href="index.html" className="bg-[#FF4500] text-[#FFD700] text-2xl font-bold px-6 py-3 rounded-lg shadow-xl hover:bg-[#E65100] transition duration-300 transform hover:scale-105">Back to Main Page</a>
    </div>
  );
}
